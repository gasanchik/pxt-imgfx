// tests go here; this will not be compiled when this package is used as an extension.
let img3 = img`
    99999999999999677777777777777776699999999999999999999997677777777777777766999999
    9999991dd11dddd66777777777777666999999999999999999dddddd667777777777776669999999
    99dd9d111111dd1ddd66666666666699999999999999999ddddddddddd6666666666666799999999
    99d1dd11d111111d11d666666667999999999999999999dddddddddddddd66666666699999999999
    99d11dd1111111d111ddd779999999999999999999999dddddddddddddddddd79999999999999999
    99d111d11d11ddd11ddddd999999999b6666799999997ddddddddd7777ddddd79999999996666699
    dd9d111d555ddd11ddddd999999999976666666799999ddddddddddd77777779999999999b666666
    d11dd11d5555d1dddd11d99999966699b6666666699997dddddddddddd9999999999666799b66666
    911dddd1d55511ddd11d9999996666b9766666666999997ddddddddd779999999999666699b66666
    7dd11dd111111dd11dd99999966666667b6666666977699777777777999999999966666666766666
    7111ddddd111dddd111d999967666666666666777777699999967999999999999976666666666666
    77111dddd11dddd111799999b6666666666677777777799996777d799999ddddd1d7666666666677
    77ddd71111dd1117dd7999999b76666666677777777776967777777dd91dd1d1d1dd7dd666666777
    7ddd711d111d71117779999999b676666677777777777677777777711d11111111ddd1d666667777
    777711d7d11176ddd9999999999bbb66667777777777777777777d6111d1111111dd11d6666b7777
    777777777d1167999999999999997bbbbb677777777777777777766d11ddd1d11dd111dbbbbb7777
    7777777777666999999999999999999999677777777777777777ddddd11ddd5ddd111d9dd9996777
    7777777776669999999999999999999999967777777777777766d11dddd1d555d1d1dd11d9996677
    7777776666999999999999999999dddddddd66667777777766679d111dd1115111ddd11dddddd666
    666666666999999999999999999dddddddddd66666666666667999dd11dd11d11ddd11dddddddd66
    6666667999999999999999999ddddddddddddddd6666666699999d111dddd111ddddd111dddddddd
    d79999999999999999999999dddddddddddddddddd7799999999997111dddd1ddddd1117dddddddd
    d799999999b6666699999997ddddddddd7777dddddd999999999667dd7111dd1d117ddddddd777dd
    79999999997b666666799999ddddddddddd777777d9999999999b67771117d11d1117ddddddd7777
    999999666999b6666666999977ddddddddddd9999999999666799b66ddd6611199d11ddddddddd79
    9999966666b9b66666669999997777777777799999999966666699b6666661199997777777777799
    99996666666666666667777699999999999999999999996666666666666667777999999999999999
    99997666666666666777777699999967d999999999999b666666666666777777779999967d799999
    9999b766666666677777777779996777d79999999999977666666666677777777699967777d99999
    9999b76666666667777777776996777777999999999999b766666666777777777799677777d69999
    99999b6766666677777777776677777777999999999999bb76666667777777777767777777d69999
    999999bbb6666b777777777777777777d69999999999999bbb666667777777777777777777769999
    99999997bbbbbb77777777777777777766999999999999999bbbbbb6777777777777777777679999
    99999999999999677777777777777776699999999999999999999996777777777777777776699999
    99999999999999667777777777777766999999999999999999999999677777777777777666999999
    9999999dddddddd666677777777666699999999999999999ddddddddd66677777777766679999999
    99999dddddddddddd66666666666699999999999999999ddddddddddddd666666666667999999999
    9999ddddddddddddddddd779999999999999999999999ddddddddddddddddd779999999999999999
    999ddddddddd77dddddddd99999999999999999999999dddddddd777ddddddd79999999999999999
    999dddddddddd77777ddd7999999999b6666669999997dddddddddd77777ddd9999999999b666667
    9997dddddddddd777777d999999999976666666799999ddddddddddd77777779999999999b666666
    99997ddddddddddd7999999999966699b6666666699997dddddddddddd9999999999666799b66666
    9999977777777777999999999966666b9b6666666999997777777777779999999996666669b66666
    77799999999999999999999996666666666666667777699999999999999999999966666666666666
    77779999967d799d1ddddd99b766666666666777777769999967dd99999999999976666666666667
    777699967777dddd1d1d1dd17bdd6666666677777777779967777d799999999999b7666666666777
    77776677777711dd11111111dd1d666666677777777776677777777999999999997b776666667777
    777777777777111d1111111d111d6666667777777777777777777d69999999999999b66666667777
    777777777777d11dd11d1ddd111dbbbbbb77777777777777777777699999999999999bbbbbbb7777
    777777777dd6d111ddd5ddd111d9ddbbbb6777777777777777776669999999999999999bbbbb6777
    777777777d1ddd1ddd55ddd11ddd1199996777777777777777776699999999999999999999996777
    7777777776111ddd11d5511ddd111d99999677777777777777666999999999999999999999996677
    7777776666dd111dd11d11dd111ddddddddd666677777777666799999999999999999dddddddd666
    66666666991111dddd111ddddd111ddddddddd66666666666799999999999999999dddddddddddd6
    779999999977111dddd1dddd11177ddddddddddddd779999999999999999999999dddddddddddddd
    d79999999999dd711d1dd11177dd7ddd777dddddddd9999999999999999999999ddddddddd77dddd
    d999999999ddd7111d11d71111777ddddd77777ddd7999999999b666666999999dddddddddd77777
    9999996b99976d1d6611199ddddddddddddd79777799999967997b666666699997ddddddddddd799
    999996666b99b66666611999977dddddddd779999999999666699766666667999977ddddddddd779
    999966666666766666669776999777777779999999999966666667b6666666776999777777777999
`


let a = 16
let x = 0
let y = 0
scene.setBackgroundColor(3)
scene.createRenderable(0, (target: Image, camera: scene.Camera) => {
    let img1 = img3
    //img1 = imgfx.heatX(img1, 0.1, 5, game.runtime() * 5, true)
    img1 = imgfx.repeatImage(img`
        . . . . c c c b b b b b . . . .
        . . c c b 4 4 4 4 4 4 b b b . .
        . c c 4 4 4 4 4 5 4 4 4 4 b c .
        . e 4 4 4 4 4 4 4 4 4 5 4 4 e .
        e b 4 5 4 4 5 4 4 4 4 4 4 4 b c
        e b 4 4 4 4 4 4 4 4 4 4 5 4 4 e
        e b b 4 4 4 4 4 4 4 4 4 4 4 b e
        . e b 4 4 4 4 4 5 4 4 4 4 b e .
        8 7 e e b 4 4 4 4 4 4 b e e 6 8
        8 7 2 e e e e e e e e e e 2 7 8
        e 6 6 2 2 2 2 2 2 2 2 2 2 6 c e
        e c 6 7 6 6 7 7 7 6 6 7 6 c c e
        e b e 8 8 c c 8 8 c c c 8 e b e
        e e b e c c e e e e e c e b e e
        . e e b b 4 4 4 4 4 4 4 4 e e .
        . . . c c c c c e e e e e . . .
    `, x, y, 5, 5)
    img1 = imgfx.squishImageX(img1, 3, game.runtime() * 2)
    img1 = imgfx.squishImageY(img1, 3, game.runtime() * 2)
    //img1 = imgfx.heatY(img1, 0.1, 5, game.runtime() * 5, true)
    //img1 = imgfx.repeatImage(img1, x, y, 160, 120)
    //img1 = imgfx.dither(img1, a, 0, , x, y)
    scene.setBackgroundImage(img1)
})
controller.A.onEvent(ControllerButtonEvent.Pressed, function() {
    a--
})
controller.B.onEvent(ControllerButtonEvent.Pressed, function() {
    a++  
})
forever(function() {
   x+=controller.dx()
   y+=controller.dy()
})